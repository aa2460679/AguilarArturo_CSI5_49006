(function(){(function(){if("undefined"!=typeof localStorage){var p=function(b){var a="//"+window.location.host+"/b?&callback=?",c="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("get",a,!0);c.onreadystatechange=function(){var a;4==c.readyState&&(a=c.status,200==a&&b&&b(c.responseText))};c.send()},d=function(b){try{b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(window.location.href);return null==a?"":decodeURIComponent(a[1])}catch(c){}},
l=function(b,a){top.postMessage(b,a)},g=decodeURIComponent(d("k")),m=decodeURIComponent(d("v")),h=decodeURIComponent(d("d"));d("extid");g&&m?localStorage.setItem(g,m):g&&h&&l(g,h);h&&(d=window.addEventListener?"addEventListener":"attachEvent",(0,window[d])("attachEvent"==d?"onmessage":"message",function(b){try{if(b.origin==h&&b.data){var a=b.data.split("^^^"),c,e;2<=a.length?(c=a[0],e=a[1].split(":::")):(c=null,e=a[0].split(":::"));if(e&&2<=e.length){var d=e[0],f=e[1];switch(d){case "getbucket":p(function(a){if("string"==
typeof a)try{var b=/\(([^)]+)\)/.exec(a),b=JSON.parse(b[1]);l(c+"^^^"+b.a,h)}catch(d){}});break;case "get":l(c+"^^^"+localStorage.getItem(f),h);break;case "remove":localStorage.removeItem(f);break;case "increment":var k=localStorage.getItem(f);k?(k=parseInt(k),k++):k=1;localStorage.setItem(f,k);break;case "setifnull":var g=f.split("***");null==localStorage.getItem(g[0])&&localStorage.setItem(g[0],g[1]);break;case "getandremove":l(c+"^^^"+localStorage.getItem(f),h);localStorage.removeItem(f);break;
case "getmulti":case "getandremovemulti":var n=f.split("~~~");b="getandremovemulti"==d?!0:!1;a="";for(e=0;e<n.length;e++)a+=localStorage.getItem(n[e]),b&&localStorage.removeItem(n[e]),e!=n.length-1&&(a+="~~~");l(c+"^^^"+a,h);break;case "gQueue":case "pQueue":var m=localStorage.getItem(d)||"";localStorage.setItem(d,m+f);break;default:localStorage.setItem(d,f)}}}}catch(q){}},!1))}})();})();
